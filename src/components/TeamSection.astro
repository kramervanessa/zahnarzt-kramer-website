---
import { getCollection, render } from "astro:content";
import { t } from "@/i18n/translations";
import type { Lang } from "@/i18n/translations";

interface Props {
  lang: Lang;
}

const { lang } = Astro.props;
const allTeam = await getCollection("team");
const team = allTeam
  .filter((m) => m.data.lang === lang)
  .sort((a, b) => a.data.order - b.data.order);
---

<section id="team" class="bg-pink-50/50 py-20">
  <div class="mx-auto max-w-6xl px-4">
    <div class="mb-12 text-center">
      <h2 class="mb-3 text-3xl font-bold text-gray-900 md:text-4xl">
        {t(lang, "team.title")}
      </h2>
      <p class="mx-auto max-w-xl text-gray-500">
        {t(lang, "team.subtitle")}
      </p>
    </div>

    <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
      {team.map(async (member) => {
        const { Content } = await render(member);
        return (
          <div class="overflow-hidden rounded-2xl border border-pink-100 bg-white shadow-sm transition-all hover:shadow-md hover:shadow-pink-50">
            <div class="flex h-48 items-center justify-center bg-gradient-to-br from-pink-100 to-rose-100">
              <div class="flex h-24 w-24 items-center justify-center rounded-full bg-white text-3xl font-bold text-pink-400 shadow-inner">
                {member.data.name
                  .split(" ")
                  .map((n: string) => n[0])
                  .join("")}
              </div>
            </div>
            <div class="p-6">
              <h3 class="text-lg font-semibold text-gray-800">
                {member.data.name}
              </h3>
              <p class="mb-3 text-sm font-medium text-pink-500">
                {member.data.role}
              </p>
              <div class="prose prose-sm prose-pink text-gray-500">
                <Content />
              </div>
            </div>
          </div>
        );
      })}
    </div>
  </div>
</section>
